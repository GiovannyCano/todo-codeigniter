<?xml version="1.0" encoding="UTF-8"?>
<phpunit
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="https://schema.phpunit.de/10.5/phpunit.xsd"
  bootstrap="vendor/codeigniter4/framework/system/Test/bootstrap.php"
  colors="true"
  cacheDirectory="build/.phpunit.cache">

  <testsuites>
    <testsuite name="App">
      <directory suffix="Test.php">./tests</directory>
    </testsuite>
  </testsuites>

  <php>
    <!-- Necesario para FeatureTestTrait -->
    <server name="app.baseURL" value="http://localhost:8080/"/>
    <env name="CI_ENVIRONMENT" value="testing"/>

    <!-- Rutas esperadas por el bootstrap -->
    <const name="HOMEPATH"   value="./"/>
    <const name="CONFIGPATH" value="./app/Config/"/>
    <const name="PUBLICPATH" value="./public/"/>

    <!-- Fuerza que tanto 'default' como 'tests' apunten a MariaDB y SIN prefijo -->
    <env name="database.default.hostname" value="db"/>
    <env name="database.default.database" value="todo"/>
    <env name="database.default.username" value="app"/>
    <env name="database.default.password" value="app"/>
    <env name="database.default.DBDriver" value="MySQLi"/>
    <env name="database.default.port"     value="3306"/>
    <env name="database.default.DBPrefix" value=""/>

    <env name="database.tests.hostname" value="db"/>
    <env name="database.tests.database" value="todo"/>
    <env name="database.tests.username" value="app"/>
    <env name="database.tests.password" value="app"/>
    <env name="database.tests.DBDriver" value="MySQLi"/>
    <env name="database.tests.port"     value="3306"/>
    <env name="database.tests.DBPrefix" value=""/>
  </php>
</phpunit>
